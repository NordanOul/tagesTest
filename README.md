# Тестовое задание
### Логика:
Данные в web-форму вводятся вручную, пользователем. Данные о наименовании мероприятия и дате проведения формирует сама web-форма. По нажатию кнопки "Отправить", данные отправляются в микросервис. Микросервис формирует данные о дате и времени регистрации заявки. Микросервис отправляет данные в CRM систему. CRM система проверяет данные, по настройкам фильтрации и выдает заявке статус "Одобрено" или "Отказ".

Заявка считается зарегистрированной, если:
1. В СРМ нет заявки с уже существующим адресом электронной почты;
2. Количество участников не превышает лимита по мероприятию;
3. Заявка получила Статус "Одобрено" в СРМ.

CRM отправляет ответ Микросервису по итогам результата одобрения заявки.

Если:
1. В СРМ уже существует адрес электронной почты пользователя, то CRM выставляет статус заявки "Отказ". Микросервис отправляет сообщение об отказе в web-форму, по причине "Повторной регистрации"
2. Количество участников превышает лимита по мероприятию, то CRM выставляет статус заявки "Отказ". Микросервис отправляет сообщение об отказе в web-форму, по причине "Нет свободных мест на мероприятие"
3. Не 1 и 2 пункт, то CRM выставляет статус заявки "Одобрено". Микросервис отправляет сообщение в web-форму с текстом "Успешной регистрации". Микросервис запрашивает у CRM-системы отправки электронного письма на адрес электронной почты. CRM отправляет письмо на адрес электронной почты.

### Входные данные:

| Атрибут                   | Тип данных | Обязательный? | Описание                                                                                 |
| :------------------------ |:---------- | :------------ |:---------------------------------------------------------------------------------------- |
| Адрес электронной почты   | Строка     | Да            | Адрес электронной почты для подтверждения регистрации и отправки пригласительных билетов |
| Контактный номер телефона | Число      | Нет           | Телефон для связи с зарегистрированным посетителем                                       |
| Имя                       | Строка     | Да            | Имя участника                                                                            |
| Фамилия                   | Строка     | Да            | Фамилия участника                                                                        |
| Компания                  | Строка     | Нет           | Компания                                                                                 |
| Роль в проектах           | Строка     | Нет           | Роль в проектах                                                                          |

#### Входные данные формирующиеся веб-формой:
| Атрибут                     | Тип данных | Обязательный? | Описание                       |
| :-------------------------- |:---------- | :------------ |:------------------------------ |
| Наименование мероприятия    | Строка     | Да(Системный) | Наименование мероприятия       |
| Дата проведения мероприятия | Дата(date) | Да(Системный) | Дата и время в виде yyyy-mm-dd |

#### Входные данные формирующиеся микросервисом:
| Атрибут                     | Тип данных            | Обязательный? | Ответ                                   |
| :-------------------------- |:--------------------- | :------------ |:--------------------------------------- |
| Дата и время регистрации    | Дата-Время(date-time) | Да(Системный) | Дата и время в виде yyyy-mm-dd hh:mm:ss |

### Выходные данные

| Атрибут   | Тип данных | Обязательный? | Описание                                    |
| :-------- |:---------- | :------------ |:------------------------------------------- |
| Сообщение | Строка     | Да(Системный) | Ответ в web-форму по результатам ответа CRM |

#### Виды сообщений:
1. “Вы успешно зарегистрированы на мероприятие, подробная информация направлена вам на электронную почту”
2. “Вы уже были зарегистрированы на мероприятие. Вся информация направлена вам на адрес электронной почты. Если письмо не дошло, проверьте папку “спам” на сервере или свяжитесь с организаторами”
3. “К сожалению, кол-во свободных мест закончилось, мы не можем вас зарегистрировать на мероприятие”

### [Диаграмма последовательности](https://ibb.co/RvZHvgf)





